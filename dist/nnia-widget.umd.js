(function(g,M){typeof exports=="object"&&typeof module<"u"?M(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],M):(g=typeof globalThis<"u"?globalThis:g||self,M(g.React,g.ReactDOM))})(this,function(g,M){"use strict";var X={exports:{}},L={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ie;function De(){if(ie)return L;ie=1;var v=g,c=Symbol.for("react.element"),h=Symbol.for("react.fragment"),w=Object.prototype.hasOwnProperty,d=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R={key:!0,ref:!0,__self:!0,__source:!0};function _(T,f,k){var y,E={},l=null,S=null;k!==void 0&&(l=""+k),f.key!==void 0&&(l=""+f.key),f.ref!==void 0&&(S=f.ref);for(y in f)w.call(f,y)&&!R.hasOwnProperty(y)&&(E[y]=f[y]);if(T&&T.defaultProps)for(y in f=T.defaultProps,f)E[y]===void 0&&(E[y]=f[y]);return{$$typeof:c,type:T,key:l,ref:S,props:E,_owner:d.current}}return L.Fragment=h,L.jsx=_,L.jsxs=_,L}var V={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var se;function Ie(){return se||(se=1,process.env.NODE_ENV!=="production"&&function(){var v=g,c=Symbol.for("react.element"),h=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),l=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),I=Symbol.iterator,U="@@iterator";function q(e){if(e===null||typeof e!="object")return null;var r=I&&e[I]||e[U];return typeof r=="function"?r:null}var A=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(e){{for(var r=arguments.length,t=new Array(r>1?r-1:0),a=1;a<r;a++)t[a-1]=arguments[a];Ve("error",e,t)}}function Ve(e,r,t){{var a=A.ReactDebugCurrentFrame,s=a.getStackAddendum();s!==""&&(r+="%s",t=t.concat([s]));var u=t.map(function(i){return String(i)});u.unshift("Warning: "+r),Function.prototype.apply.call(console[e],console,u)}}var Ye=!1,Ue=!1,Be=!1,$e=!1,ze=!1,le;le=Symbol.for("react.module.reference");function Ke(e){return!!(typeof e=="string"||typeof e=="function"||e===w||e===R||ze||e===d||e===k||e===y||$e||e===S||Ye||Ue||Be||typeof e=="object"&&e!==null&&(e.$$typeof===l||e.$$typeof===E||e.$$typeof===_||e.$$typeof===T||e.$$typeof===f||e.$$typeof===le||e.getModuleId!==void 0))}function Je(e,r,t){var a=e.displayName;if(a)return a;var s=r.displayName||r.name||"";return s!==""?t+"("+s+")":t}function ue(e){return e.displayName||"Context"}function O(e){if(e==null)return null;if(typeof e.tag=="number"&&b("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case h:return"Portal";case R:return"Profiler";case d:return"StrictMode";case k:return"Suspense";case y:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case T:var r=e;return ue(r)+".Consumer";case _:var t=e;return ue(t._context)+".Provider";case f:return Je(e,e.render,"ForwardRef");case E:var a=e.displayName||null;return a!==null?a:O(e.type)||"Memo";case l:{var s=e,u=s._payload,i=s._init;try{return O(i(u))}catch{return null}}}return null}var P=Object.assign,B=0,ce,fe,de,ve,pe,he,me;function ye(){}ye.__reactDisabledLog=!0;function He(){{if(B===0){ce=console.log,fe=console.info,de=console.warn,ve=console.error,pe=console.group,he=console.groupCollapsed,me=console.groupEnd;var e={configurable:!0,enumerable:!0,value:ye,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}B++}}function Ge(){{if(B--,B===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:P({},e,{value:ce}),info:P({},e,{value:fe}),warn:P({},e,{value:de}),error:P({},e,{value:ve}),group:P({},e,{value:pe}),groupCollapsed:P({},e,{value:he}),groupEnd:P({},e,{value:me})})}B<0&&b("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Z=A.ReactCurrentDispatcher,Q;function K(e,r,t){{if(Q===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);Q=a&&a[1]||""}return`
`+Q+e}}var ee=!1,J;{var Xe=typeof WeakMap=="function"?WeakMap:Map;J=new Xe}function ge(e,r){if(!e||ee)return"";{var t=J.get(e);if(t!==void 0)return t}var a;ee=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var u;u=Z.current,Z.current=null,He();try{if(r){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(j){a=j}Reflect.construct(e,[],i)}else{try{i.call()}catch(j){a=j}e.call(i.prototype)}}else{try{throw Error()}catch(j){a=j}e()}}catch(j){if(j&&a&&typeof j.stack=="string"){for(var o=j.stack.split(`
`),x=a.stack.split(`
`),p=o.length-1,m=x.length-1;p>=1&&m>=0&&o[p]!==x[m];)m--;for(;p>=1&&m>=0;p--,m--)if(o[p]!==x[m]){if(p!==1||m!==1)do if(p--,m--,m<0||o[p]!==x[m]){var C=`
`+o[p].replace(" at new "," at ");return e.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",e.displayName)),typeof e=="function"&&J.set(e,C),C}while(p>=1&&m>=0);break}}}finally{ee=!1,Z.current=u,Ge(),Error.prepareStackTrace=s}var W=e?e.displayName||e.name:"",N=W?K(W):"";return typeof e=="function"&&J.set(e,N),N}function qe(e,r,t){return ge(e,!1)}function Ze(e){var r=e.prototype;return!!(r&&r.isReactComponent)}function H(e,r,t){if(e==null)return"";if(typeof e=="function")return ge(e,Ze(e));if(typeof e=="string")return K(e);switch(e){case k:return K("Suspense");case y:return K("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case f:return qe(e.render);case E:return H(e.type,r,t);case l:{var a=e,s=a._payload,u=a._init;try{return H(u(s),r,t)}catch{}}}return""}var $=Object.prototype.hasOwnProperty,be={},xe=A.ReactDebugCurrentFrame;function G(e){if(e){var r=e._owner,t=H(e.type,e._source,r?r.type:null);xe.setExtraStackFrame(t)}else xe.setExtraStackFrame(null)}function Qe(e,r,t,a,s){{var u=Function.call.bind($);for(var i in e)if(u(e,i)){var o=void 0;try{if(typeof e[i]!="function"){var x=Error((a||"React class")+": "+t+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw x.name="Invariant Violation",x}o=e[i](r,i,a,t,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(p){o=p}o&&!(o instanceof Error)&&(G(s),b("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",a||"React class",t,i,typeof o),G(null)),o instanceof Error&&!(o.message in be)&&(be[o.message]=!0,G(s),b("Failed %s type: %s",t,o.message),G(null))}}}var er=Array.isArray;function re(e){return er(e)}function rr(e){{var r=typeof Symbol=="function"&&Symbol.toStringTag,t=r&&e[Symbol.toStringTag]||e.constructor.name||"Object";return t}}function tr(e){try{return Ee(e),!1}catch{return!0}}function Ee(e){return""+e}function je(e){if(tr(e))return b("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",rr(e)),Ee(e)}var we=A.ReactCurrentOwner,nr={key:!0,ref:!0,__self:!0,__source:!0},Re,_e;function ar(e){if($.call(e,"ref")){var r=Object.getOwnPropertyDescriptor(e,"ref").get;if(r&&r.isReactWarning)return!1}return e.ref!==void 0}function or(e){if($.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function ir(e,r){typeof e.ref=="string"&&we.current}function sr(e,r){{var t=function(){Re||(Re=!0,b("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};t.isReactWarning=!0,Object.defineProperty(e,"key",{get:t,configurable:!0})}}function lr(e,r){{var t=function(){_e||(_e=!0,b("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};t.isReactWarning=!0,Object.defineProperty(e,"ref",{get:t,configurable:!0})}}var ur=function(e,r,t,a,s,u,i){var o={$$typeof:c,type:e,key:r,ref:t,props:i,_owner:u};return o._store={},Object.defineProperty(o._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(o,"_self",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.defineProperty(o,"_source",{configurable:!1,enumerable:!1,writable:!1,value:s}),Object.freeze&&(Object.freeze(o.props),Object.freeze(o)),o};function cr(e,r,t,a,s){{var u,i={},o=null,x=null;t!==void 0&&(je(t),o=""+t),or(r)&&(je(r.key),o=""+r.key),ar(r)&&(x=r.ref,ir(r,s));for(u in r)$.call(r,u)&&!nr.hasOwnProperty(u)&&(i[u]=r[u]);if(e&&e.defaultProps){var p=e.defaultProps;for(u in p)i[u]===void 0&&(i[u]=p[u])}if(o||x){var m=typeof e=="function"?e.displayName||e.name||"Unknown":e;o&&sr(i,m),x&&lr(i,m)}return ur(e,o,x,s,a,we.current,i)}}var te=A.ReactCurrentOwner,Ce=A.ReactDebugCurrentFrame;function F(e){if(e){var r=e._owner,t=H(e.type,e._source,r?r.type:null);Ce.setExtraStackFrame(t)}else Ce.setExtraStackFrame(null)}var ne;ne=!1;function ae(e){return typeof e=="object"&&e!==null&&e.$$typeof===c}function Te(){{if(te.current){var e=O(te.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function fr(e){return""}var ke={};function dr(e){{var r=Te();if(!r){var t=typeof e=="string"?e:e.displayName||e.name;t&&(r=`

Check the top-level render call using <`+t+">.")}return r}}function Se(e,r){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var t=dr(r);if(ke[t])return;ke[t]=!0;var a="";e&&e._owner&&e._owner!==te.current&&(a=" It was passed a child from "+O(e._owner.type)+"."),F(e),b('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',t,a),F(null)}}function Oe(e,r){{if(typeof e!="object")return;if(re(e))for(var t=0;t<e.length;t++){var a=e[t];ae(a)&&Se(a,r)}else if(ae(e))e._store&&(e._store.validated=!0);else if(e){var s=q(e);if(typeof s=="function"&&s!==e.entries)for(var u=s.call(e),i;!(i=u.next()).done;)ae(i.value)&&Se(i.value,r)}}}function vr(e){{var r=e.type;if(r==null||typeof r=="string")return;var t;if(typeof r=="function")t=r.propTypes;else if(typeof r=="object"&&(r.$$typeof===f||r.$$typeof===E))t=r.propTypes;else return;if(t){var a=O(r);Qe(t,e.props,"prop",a,e)}else if(r.PropTypes!==void 0&&!ne){ne=!0;var s=O(r);b("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",s||"Unknown")}typeof r.getDefaultProps=="function"&&!r.getDefaultProps.isReactClassApproved&&b("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function pr(e){{for(var r=Object.keys(e.props),t=0;t<r.length;t++){var a=r[t];if(a!=="children"&&a!=="key"){F(e),b("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",a),F(null);break}}e.ref!==null&&(F(e),b("Invalid attribute `ref` supplied to `React.Fragment`."),F(null))}}var Pe={};function Ne(e,r,t,a,s,u){{var i=Ke(e);if(!i){var o="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(o+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var x=fr();x?o+=x:o+=Te();var p;e===null?p="null":re(e)?p="array":e!==void 0&&e.$$typeof===c?(p="<"+(O(e.type)||"Unknown")+" />",o=" Did you accidentally export a JSX literal instead of a component?"):p=typeof e,b("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",p,o)}var m=cr(e,r,t,s,u);if(m==null)return m;if(i){var C=r.children;if(C!==void 0)if(a)if(re(C)){for(var W=0;W<C.length;W++)Oe(C[W],e);Object.freeze&&Object.freeze(C)}else b("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Oe(C,e)}if($.call(r,"key")){var N=O(e),j=Object.keys(r).filter(function(xr){return xr!=="key"}),oe=j.length>0?"{key: someKey, "+j.join(": ..., ")+": ...}":"{key: someKey}";if(!Pe[N+oe]){var br=j.length>0?"{"+j.join(": ..., ")+": ...}":"{}";b(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,oe,N,br,N),Pe[N+oe]=!0}}return e===w?pr(m):vr(m),m}}function hr(e,r,t){return Ne(e,r,t,!0)}function mr(e,r,t){return Ne(e,r,t,!1)}var yr=mr,gr=hr;V.Fragment=w,V.jsx=yr,V.jsxs=gr}()),V}process.env.NODE_ENV==="production"?X.exports=De():X.exports=Ie();var n=X.exports,D={},Y=M;if(process.env.NODE_ENV==="production")D.createRoot=Y.createRoot,D.hydrateRoot=Y.hydrateRoot;else{var z=Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;D.createRoot=function(v,c){z.usingClientEntryPoint=!0;try{return Y.createRoot(v,c)}finally{z.usingClientEntryPoint=!1}},D.hydrateRoot=function(v,c,h){z.usingClientEntryPoint=!0;try{return Y.hydrateRoot(v,c,h)}finally{z.usingClientEntryPoint=!1}}}const Ae=({onClick:v,isOpen:c,config:h})=>n.jsx("div",{onClick:v,className:`
        w-14 h-14 rounded-full shadow-lg cursor-pointer transition-all duration-300
        hover:scale-110 hover:shadow-xl flex items-center justify-center
        ${c?"bg-gray-500":""}
      `,style:{backgroundColor:c?"#6b7280":h.theme.primaryColor,color:"#ffffff"},children:c?n.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):n.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),Fe=({value:v,onChange:c,onSend:h,onKeyPress:w,isLoading:d,config:R})=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"flex-1 relative",children:n.jsx("textarea",{value:v,onChange:_=>c(_.target.value),onKeyPress:w,placeholder:"Escribe tu mensaje...",disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{borderColor:R.theme.primaryColor,minHeight:"40px",maxHeight:"100px"},rows:"1"})}),n.jsx("button",{onClick:h,disabled:!v.trim()||d,className:`
          p-2 rounded-lg transition-all duration-200 flex items-center justify-center
          ${!v.trim()||d?"bg-gray-300 text-gray-500 cursor-not-allowed":"hover:scale-105 hover:shadow-md"}
        `,style:{backgroundColor:!v.trim()||d?"#d1d5db":R.theme.primaryColor,color:"#ffffff"},children:d?n.jsxs("svg",{className:"animate-spin w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),n.jsx("polygon",{points:"22,2 15,22 11,13 2,9"})]})})]}),We=({messages:v,onSendMessage:c,isLoading:h,onClose:w,config:d})=>{const[R,_]=g.useState(""),T=g.useRef(null),f=()=>{var l;(l=T.current)==null||l.scrollIntoView({behavior:"smooth"})};g.useEffect(()=>{f()},[v]);const k=()=>{R.trim()&&!h&&(c(R.trim()),_(""))},y=l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),k())},E=l=>new Date(l).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"w-80 h-96 bg-white rounded-lg shadow-2xl border border-gray-200 flex flex-col mb-4",style:{backgroundColor:d.theme.backgroundColor,color:d.theme.textColor},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 rounded-t-lg",style:{backgroundColor:d.theme.primaryColor,color:"#ffffff"},children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-white bg-opacity-20 flex items-center justify-center",children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-sm",children:"NNIA"}),n.jsx("p",{className:"text-xs opacity-80",children:"Asistente virtual"})]})]}),n.jsx("button",{onClick:w,className:"text-white hover:text-gray-200 transition-colors",children:n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-3",children:[v.map(l=>n.jsx("div",{className:`flex ${l.type==="user"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-xs px-3 py-2 rounded-lg text-sm ${l.type==="user"?"bg-blue-500 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,style:{backgroundColor:l.type==="user"?d.theme.primaryColor:"#f3f4f6",color:l.type==="user"?"#ffffff":d.theme.textColor},children:[n.jsx("p",{className:"whitespace-pre-wrap",children:l.content}),n.jsx("p",{className:`text-xs mt-1 ${l.type==="user"?"text-blue-100":"text-gray-500"}`,children:E(l.timestamp)})]})},l.id)),h&&n.jsx("div",{className:"flex justify-start",children:n.jsx("div",{className:"bg-gray-100 text-gray-800 rounded-lg rounded-bl-none px-3 py-2",children:n.jsxs("div",{className:"flex space-x-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),n.jsx("div",{ref:T})]}),n.jsx("div",{className:"p-4 border-t border-gray-200",children:n.jsx(Fe,{value:R,onChange:_,onSend:k,onKeyPress:y,isLoading:h,config:d})})]})},Me=({config:v})=>{const[c,h]=g.useState(!1),[w,d]=g.useState([]),[R,_]=g.useState(!1),f={...{position:"bottom-right",theme:{primaryColor:"#3b82f6",backgroundColor:"#ffffff",textColor:"#1f2937"},welcomeMessage:"¡Hola! Soy NNIA, tu asistente virtual. ¿En qué puedo ayudarte?",apiUrl:"https://api.nnia.com",businessId:"default"},...v},k=()=>{switch(f.position){case"bottom-left":return"bottom-4 left-4";case"bottom-center":return"bottom-4 left-1/2 transform -translate-x-1/2";case"top-right":return"top-4 right-4";case"top-left":return"top-4 left-4";case"top-center":return"top-4 left-1/2 transform -translate-x-1/2";default:return"bottom-4 right-4"}};g.useEffect(()=>{w.length===0&&d([{id:1,type:"assistant",content:f.welcomeMessage,timestamp:new Date}])},[f.welcomeMessage]);const y=async E=>{const l={id:Date.now(),type:"user",content:E,timestamp:new Date};d(S=>[...S,l]),_(!0);try{const I=await(await fetch(`${f.apiUrl}/api/nnia/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:E,businessId:f.businessId,origin:"widget"})})).json(),U={id:Date.now()+1,type:"assistant",content:I.message,timestamp:new Date};d(q=>[...q,U])}catch(S){console.error("Error al enviar mensaje:",S);const I={id:Date.now()+1,type:"assistant",content:"Lo siento, hubo un error al procesar tu mensaje. Por favor, intenta de nuevo.",timestamp:new Date};d(U=>[...U,I])}finally{_(!1)}};return n.jsxs("div",{className:`fixed ${k()} z-50`,children:[c&&n.jsx("div",{className:"slide-in",children:n.jsx(We,{messages:w,onSendMessage:y,isLoading:R,onClose:()=>h(!1),config:f})}),n.jsx(Ae,{onClick:()=>h(!c),isOpen:c,config:f})]})};function Le(v={}){const c=document.createElement("div");return c.id="nnia-widget-container",document.body.appendChild(c),D.createRoot(c).render(n.jsx(g.StrictMode,{children:n.jsx(Me,{config:v})})),{destroy:()=>{const h=document.getElementById("nnia-widget-container");h&&(D.unmountComponentAtNode(h),h.remove())}}}typeof window<"u"&&(window.initNNIAWidget=Le)});
